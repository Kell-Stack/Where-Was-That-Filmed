{"ast":null,"code":"/*global google*/\nimport React, { useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { Map, GoogleAPI, GoogleApiWrapper, InfoWindow, Marker } from 'google-maps-react';\nimport MarkerClusterer from '/Users/tpl9/Dev/WWTF/client/src/markerclusterer/markerclusterer.js'; //const google=window.google\n\nconst evtNames = ['click', 'dblclick', 'dragend', 'mousedown', 'mouseout', 'mouseover', 'mouseup', 'recenter'];\n\nconst markerCluster = props => {\n  const map = props.map,\n        google = props.google,\n        markers = props.markers;\n\n  const handleEvent = ({\n    event,\n    marker,\n    entry\n  }) => {\n    if (props[event]) {\n      props[event]({\n        props: props,\n        marker: marker,\n        event: event,\n        entry: entry\n      });\n    }\n  }; // This hook works like ComponentWillMount\n  // The  hook isn't really needed, this whole thing worked without it,\n  // I added the hook so that I could implement a cleanup function\n\n\n  useEffect(() => {\n    if (map && markers) {\n      const mapMarkers = markers.map(marker => {\n        const entry = new google.maps.Marker({\n          position: {\n            lat: marker.position.lat,\n            lng: marker.position.lng\n          },\n          map: map,\n          name: marker.name\n        });\n        evtNames.forEach(e => {\n          entry.addListener(e, () => handleEvent({\n            event: e,\n            marker: marker,\n            entry: entry\n          }));\n        });\n        return entry;\n      });\n      const clusterer = new MarkerClusterer(map, mapMarkers, {\n        imagePath: '/markerclusterer/m'\n      }); // Cleanup function. Note, this is only returned if we create the markers\n\n      return () => {\n        //console.log('Cleaning up markers')\n        clusterer.clearMarkers();\n      };\n    }\n  }, [map, google, markers]); // Do we need to render anything??\n\n  return null;\n};\n\nmarkerCluster.propTypes = {\n  map: PropTypes.object,\n  google: PropTypes.object,\n  markers: PropTypes.arrayOf(PropTypes.shape({\n    position: PropTypes.shape({\n      lat: PropTypes.number.isRequired,\n      lng: PropTypes.number.isRequired\n    }).isRequired,\n    name: PropTypes.string.isRequired\n  }))\n};\nexport default markerCluster;","map":{"version":3,"sources":["/Users/tpl9/Dev/WWTF/client/src/MarkerCluster.js"],"names":["React","useEffect","PropTypes","Map","GoogleAPI","GoogleApiWrapper","InfoWindow","Marker","MarkerClusterer","evtNames","markerCluster","props","map","google","markers","handleEvent","event","marker","entry","mapMarkers","maps","position","lat","lng","name","forEach","e","addListener","clusterer","imagePath","clearMarkers","propTypes","object","arrayOf","shape","number","isRequired","string"],"mappings":"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","sourcesContent":["/*global google*/\nimport React, {useEffect} from 'react'\nimport PropTypes from 'prop-types'\nimport { Map, GoogleAPI, GoogleApiWrapper, InfoWindow, Marker} from 'google-maps-react';\nimport MarkerClusterer from '/Users/tpl9/Dev/WWTF/client/src/markerclusterer/markerclusterer.js'\n\n//const google=window.google\n\nconst evtNames = [\n    'click',\n    'dblclick',\n    'dragend',\n    'mousedown',\n    'mouseout',\n    'mouseover',\n    'mouseup',\n    'recenter',\n  ]\n\n  const markerCluster = (props) => {\n    const {map, google, markers} = props\n\n    const handleEvent = ({event, marker, entry}) => {\n      if (props[event]) {\n        props[event]({\n          props: props,\n          marker: marker,\n          event: event,\n          entry: entry\n        })\n      }\n    }\n\n    // This hook works like ComponentWillMount\n    // The  hook isn't really needed, this whole thing worked without it,\n    // I added the hook so that I could implement a cleanup function\n    useEffect(() => {\n      if (map && markers) {\n        const mapMarkers = markers.map((marker) => {\n          const entry = new google.maps.Marker({\n            position: {\n              lat: marker.position.lat,\n              lng: marker.position.lng\n            },\n            map: map,\n            name: marker.name\n          })\n\n          evtNames.forEach(e => {\n            entry.addListener(e, () => handleEvent({\n              event: e,\n              marker: marker,\n              entry: entry\n            }))\n          })\n\n          return entry\n        })\n\n        const clusterer = new MarkerClusterer(map, mapMarkers, {imagePath: '/markerclusterer/m'})\n\n        // Cleanup function. Note, this is only returned if we create the markers\n        return () => {\n          //console.log('Cleaning up markers')\n          clusterer.clearMarkers()\n        }\n      }\n    }, [map, google, markers])\n\n\n    // Do we need to render anything??\n    return (null)\n\n  }\n\n  markerCluster.propTypes = {\n    map: PropTypes.object,\n    google: PropTypes.object,\n    markers: PropTypes.arrayOf(PropTypes.shape({\n      position: PropTypes.shape({\n        lat: PropTypes.number.isRequired,\n        lng: PropTypes.number.isRequired,\n      }).isRequired,\n      name: PropTypes.string.isRequired,\n    })),\n  }\n\n  export default markerCluster"]},"metadata":{},"sourceType":"module"}